var BaseLocalStorageCollection, MainChannel, MessageChannel, ResourceChannel;

import $ from 'jquery';

import _ from 'underscore';

import Backbone from 'backbone';

MainChannel = Backbone.Radio.channel('global');

MessageChannel = Backbone.Radio.channel('messages');

ResourceChannel = Backbone.Radio.channel('resources');

BaseLocalStorageCollection = (function() {
  class BaseLocalStorageCollection extends Backbone.Collection {
    initialize() {
      //console.log "initialize DocumentCollection"
      this.fetch();
      return this.on('change', this.save, this);
    }

    fetch() {
      var docs;
      //console.log 'fetching documents'
      docs = JSON.parse(localStorage.getItem(this.local_storage_key)) || [];
      return this.set(docs);
    }

    // FIXME!
    save(collection) {
      //console.log 'saving documents'
      return localStorage.setItem(this.local_storage_key, JSON.stringify(this.toJSON()));
    }

  };

  BaseLocalStorageCollection.prototype.local_storage_key = null;

  return BaseLocalStorageCollection;

}).call(this);

export {
  BaseLocalStorageCollection
};

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHNjb2xsZWN0aW9uLmpzIiwic291cmNlcyI6WyJsc2NvbGxlY3Rpb24uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsMEJBQUEsRUFBQSxXQUFBLEVBQUEsY0FBQSxFQUFBOztBQUFBLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQU8sUUFBUCxNQUFBOztBQUdBLFdBQUEsR0FBYyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsUUFBdkI7O0FBQ2QsY0FBQSxHQUFpQixRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsVUFBdkI7O0FBQ2pCLGVBQUEsR0FBa0IsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFdBQXZCOztBQUdaO0VBQU4sTUFBQSwyQkFBQSxRQUF5QyxRQUFRLENBQUMsV0FBbEQ7SUFFRSxVQUFZLENBQUEsQ0FBQSxFQUFBOztNQUVWLElBQUMsQ0FBQSxLQUFELENBQUE7YUFDQSxJQUFDLENBQUEsRUFBRCxDQUFJLFFBQUosRUFBYyxJQUFDLENBQUEsSUFBZixFQUFxQixJQUFyQjtJQUhVOztJQUtaLEtBQU8sQ0FBQSxDQUFBO0FBRUwsVUFBQSxJQUFBOztNQUFBLElBQUEsR0FBTyxJQUFJLENBQUMsS0FBTCxDQUFXLFlBQVksQ0FBQyxPQUFiLENBQXFCLElBQUMsQ0FBQSxpQkFBdEIsQ0FBWCxDQUFBLElBQXdEO2FBQy9ELElBQUMsQ0FBQSxHQUFELENBQUssSUFBTDtJQUhLLENBTlA7OztJQVlBLElBQU0sQ0FBQyxVQUFELENBQUEsRUFBQTs7YUFFSixZQUFZLENBQUMsT0FBYixDQUFxQixJQUFDLENBQUEsaUJBQXRCLEVBQXlDLElBQUksQ0FBQyxTQUFMLENBQWUsSUFBQyxDQUFBLE1BQUQsQ0FBQSxDQUFmLENBQXpDO0lBRkk7O0VBYlI7O3VDQUNFLGlCQUFBLEdBQW1COzs7Ozs7QUFrQnJCLE9BQUE7RUFDRSwwQkFERiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAkIGZyb20gJ2pxdWVyeSdcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnXG5pbXBvcnQgQmFja2JvbmUgZnJvbSAnYmFja2JvbmUnXG5cblxuTWFpbkNoYW5uZWwgPSBCYWNrYm9uZS5SYWRpby5jaGFubmVsICdnbG9iYWwnXG5NZXNzYWdlQ2hhbm5lbCA9IEJhY2tib25lLlJhZGlvLmNoYW5uZWwgJ21lc3NhZ2VzJ1xuUmVzb3VyY2VDaGFubmVsID0gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCAncmVzb3VyY2VzJ1xuXG5cbmNsYXNzIEJhc2VMb2NhbFN0b3JhZ2VDb2xsZWN0aW9uIGV4dGVuZHMgQmFja2JvbmUuQ29sbGVjdGlvblxuICBsb2NhbF9zdG9yYWdlX2tleTogbnVsbFxuICBpbml0aWFsaXplOiAoKSAtPlxuICAgICNjb25zb2xlLmxvZyBcImluaXRpYWxpemUgRG9jdW1lbnRDb2xsZWN0aW9uXCJcbiAgICBAZmV0Y2goKVxuICAgIEBvbiAnY2hhbmdlJywgQHNhdmUsIEBcbiAgICBcbiAgZmV0Y2g6ICgpIC0+XG4gICAgI2NvbnNvbGUubG9nICdmZXRjaGluZyBkb2N1bWVudHMnXG4gICAgZG9jcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oQGxvY2FsX3N0b3JhZ2Vfa2V5KSkgfHwgW11cbiAgICBAc2V0IGRvY3NcblxuICAjIEZJWE1FIVxuICBzYXZlOiAoY29sbGVjdGlvbikgLT5cbiAgICAjY29uc29sZS5sb2cgJ3NhdmluZyBkb2N1bWVudHMnXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oQGxvY2FsX3N0b3JhZ2Vfa2V5LCBKU09OLnN0cmluZ2lmeShAdG9KU09OKCkpKVxuICAgIFxuICBcbiAgXG5leHBvcnQge1xuICBCYXNlTG9jYWxTdG9yYWdlQ29sbGVjdGlvblxuICB9ICBcblxuIl19
