var BaseLocalStorageModel;

import _ from 'underscore';

import $ from 'jquery';

import {
  Model
} from 'backbone';

console.warn("Use a better model");

export default BaseLocalStorageModel = class BaseLocalStorageModel extends Model {
  initialize() {
    this.fetch();
    return this.on('change', this.save, this);
  }

  fetch() {
    return this.set(JSON.parse(localStorage.getItem(this.id)));
  }

  save(attributes, options) {
    localStorage.setItem(this.id, JSON.stringify(this.toJSON()));
    return $.ajax({
      success: options.success,
      error: options.error
    });
  }

  destroy(options) {
    return localStorage.removeItem(this.id);
  }

  isEmpty() {
    return _.size(this.attributes <= 1);
  }

};

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS1sb2NhbHN0b3JhZ2UtbW9kZWwuanMiLCJzb3VyY2VzIjpbImJhc2UtbG9jYWxzdG9yYWdlLW1vZGVsLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBOztBQUFBLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQUE7RUFBUyxLQUFUO0NBQUEsTUFBQTs7QUFFQSxPQUFPLENBQUMsSUFBUixDQUFhLG9CQUFiOztBQUVBLE9BQUEsUUFBcUIsd0JBQU4sTUFBQSxzQkFBQSxRQUFvQyxNQUFwQztFQUNiLFVBQVksQ0FBQSxDQUFBO0lBQ1YsSUFBQyxDQUFBLEtBQUQsQ0FBQTtXQUNBLElBQUMsQ0FBQSxFQUFELENBQUksUUFBSixFQUFjLElBQUMsQ0FBQSxJQUFmLEVBQXFCLElBQXJCO0VBRlU7O0VBR1osS0FBTyxDQUFBLENBQUE7V0FDTCxJQUFDLENBQUEsR0FBRCxDQUFLLElBQUksQ0FBQyxLQUFMLENBQVcsWUFBWSxDQUFDLE9BQWIsQ0FBcUIsSUFBQyxDQUFBLEVBQXRCLENBQVgsQ0FBTDtFQURLOztFQUVQLElBQU0sQ0FBQyxVQUFELEVBQWEsT0FBYixDQUFBO0lBQ0osWUFBWSxDQUFDLE9BQWIsQ0FBcUIsSUFBQyxDQUFBLEVBQXRCLEVBQTBCLElBQUksQ0FBQyxTQUFMLENBQWUsSUFBQyxDQUFBLE1BQUQsQ0FBQSxDQUFmLENBQTFCO0FBQ0EsV0FBTyxDQUFDLENBQUMsSUFBRixDQUNMO01BQUEsT0FBQSxFQUFTLE9BQU8sQ0FBQyxPQUFqQjtNQUNBLEtBQUEsRUFBTyxPQUFPLENBQUM7SUFEZixDQURLO0VBRkg7O0VBS04sT0FBUyxDQUFDLE9BQUQsQ0FBQTtBQUNQLFdBQU8sWUFBWSxDQUFDLFVBQWIsQ0FBd0IsSUFBQyxDQUFBLEVBQXpCO0VBREE7O0VBRVQsT0FBUyxDQUFBLENBQUE7QUFDUCxXQUFPLENBQUMsQ0FBQyxJQUFGLENBQU8sSUFBQyxDQUFBLFVBQUQsSUFBZSxDQUF0QjtFQURBOztBQWJJIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSdcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSdcbmltcG9ydCB7IE1vZGVsIH0gZnJvbSAnYmFja2JvbmUnXG5cbmNvbnNvbGUud2FybiBcIlVzZSBhIGJldHRlciBtb2RlbFwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VMb2NhbFN0b3JhZ2VNb2RlbCBleHRlbmRzIE1vZGVsXG4gIGluaXRpYWxpemU6IC0+XG4gICAgQGZldGNoKClcbiAgICBAb24gJ2NoYW5nZScsIEBzYXZlLCBAXG4gIGZldGNoOiAoKSAtPlxuICAgIEBzZXQgSlNPTi5wYXJzZSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSBAaWRcbiAgc2F2ZTogKGF0dHJpYnV0ZXMsIG9wdGlvbnMpIC0+XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oQGlkLCBKU09OLnN0cmluZ2lmeShAdG9KU09OKCkpKVxuICAgIHJldHVybiAkLmFqYXhcbiAgICAgIHN1Y2Nlc3M6IG9wdGlvbnMuc3VjY2Vzc1xuICAgICAgZXJyb3I6IG9wdGlvbnMuZXJyb3JcbiAgZGVzdHJveTogKG9wdGlvbnMpIC0+XG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtIEBpZFxuICBpc0VtcHR5OiAoKSAtPlxuICAgIHJldHVybiBfLnNpemUgQGF0dHJpYnV0ZXMgPD0gMVxuXG4gICAgXG4iXX0=
