var BaseLocalStorageModel;

import _ from 'underscore';

import $ from 'jquery';

import {
  Model
} from 'backbone';

console.warn("Use a better model");

BaseLocalStorageModel = class BaseLocalStorageModel extends Model {
  initialize() {
    this.fetch();
    return this.on('change', this.save, this);
  }

  fetch() {
    return this.set(JSON.parse(localStorage.getItem(this.id)));
  }

  save(attributes, options) {
    localStorage.setItem(this.id, JSON.stringify(this.toJSON()));
    return $.ajax({
      success: options.success,
      error: options.error
    });
  }

  destroy() {
    return localStorage.removeItem(this.id);
  }

  isEmpty() {
    return _.size(this.attributes <= 1);
  }

};

export default BaseLocalStorageModel;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS1sb2NhbHN0b3JhZ2UtbW9kZWwuanMiLCJzb3VyY2VzIjpbImJhc2UtbG9jYWxzdG9yYWdlLW1vZGVsLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBOztBQUFBLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQUE7RUFBUyxLQUFUO0NBQUEsTUFBQTs7QUFFQSxPQUFPLENBQUMsSUFBUixDQUFhLG9CQUFiOztBQUVNLHdCQUFOLE1BQUEsc0JBQUEsUUFBb0MsTUFBcEM7RUFDRSxVQUFZLENBQUEsQ0FBQTtJQUNWLElBQUMsQ0FBQSxLQUFELENBQUE7V0FDQSxJQUFDLENBQUEsRUFBRCxDQUFJLFFBQUosRUFBYyxJQUFDLENBQUEsSUFBZixFQUFxQixJQUFyQjtFQUZVOztFQUdaLEtBQU8sQ0FBQSxDQUFBO1dBQ0wsSUFBQyxDQUFBLEdBQUQsQ0FBSyxJQUFJLENBQUMsS0FBTCxDQUFXLFlBQVksQ0FBQyxPQUFiLENBQXFCLElBQUMsQ0FBQSxFQUF0QixDQUFYLENBQUw7RUFESzs7RUFFUCxJQUFNLENBQUMsVUFBRCxFQUFhLE9BQWIsQ0FBQTtJQUNKLFlBQVksQ0FBQyxPQUFiLENBQXFCLElBQUMsQ0FBQSxFQUF0QixFQUEwQixJQUFJLENBQUMsU0FBTCxDQUFlLElBQUMsQ0FBQSxNQUFELENBQUEsQ0FBZixDQUExQjtBQUNBLFdBQU8sQ0FBQyxDQUFDLElBQUYsQ0FDTDtNQUFBLE9BQUEsRUFBUyxPQUFPLENBQUMsT0FBakI7TUFDQSxLQUFBLEVBQU8sT0FBTyxDQUFDO0lBRGYsQ0FESztFQUZIOztFQUtOLE9BQVUsQ0FBQSxDQUFBO0FBQ1IsV0FBTyxZQUFZLENBQUMsVUFBYixDQUF3QixJQUFDLENBQUEsRUFBekI7RUFEQzs7RUFFVixPQUFTLENBQUEsQ0FBQTtBQUNQLFdBQU8sQ0FBQyxDQUFDLElBQUYsQ0FBTyxJQUFDLENBQUEsVUFBRCxJQUFlLENBQXRCO0VBREE7O0FBYlg7O0FBZ0JBLE9BQUEsUUFBZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknXG5pbXBvcnQgeyBNb2RlbCB9IGZyb20gJ2JhY2tib25lJ1xuXG5jb25zb2xlLndhcm4gXCJVc2UgYSBiZXR0ZXIgbW9kZWxcIlxuXG5jbGFzcyBCYXNlTG9jYWxTdG9yYWdlTW9kZWwgZXh0ZW5kcyBNb2RlbFxuICBpbml0aWFsaXplOiAtPlxuICAgIEBmZXRjaCgpXG4gICAgQG9uICdjaGFuZ2UnLCBAc2F2ZSwgQFxuICBmZXRjaDogKCkgLT5cbiAgICBAc2V0IEpTT04ucGFyc2UgbG9jYWxTdG9yYWdlLmdldEl0ZW0gQGlkXG4gIHNhdmU6IChhdHRyaWJ1dGVzLCBvcHRpb25zKSAtPlxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEBpZCwgSlNPTi5zdHJpbmdpZnkoQHRvSlNPTigpKSlcbiAgICByZXR1cm4gJC5hamF4XG4gICAgICBzdWNjZXNzOiBvcHRpb25zLnN1Y2Nlc3NcbiAgICAgIGVycm9yOiBvcHRpb25zLmVycm9yXG4gIGRlc3Ryb3k6ICAtPlxuICAgIHJldHVybiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSBAaWRcbiAgaXNFbXB0eTogKCkgLT5cbiAgICByZXR1cm4gXy5zaXplIEBhdHRyaWJ1dGVzIDw9IDFcblxuZXhwb3J0IGRlZmF1bHQgQmFzZUxvY2FsU3RvcmFnZU1vZGVsXG4gICAgXG4iXX0=
