var MainChannel, MessageChannel, NavbarApp, NavbarChannel;

import $ from 'jquery';

import Backbone from 'backbone';

import {
  App
} from 'marionette.toolkit';

import tc from 'teacup';

import './dbchannel';

import NavbarHeaderView from './navbar-header';

import NavbarEntriesView from './entries';

import BootstrapNavBarView from './main-view';

if (__useCssModules__) {
  require("../../sass/tknavbar.scss");
}

MainChannel = Backbone.Radio.channel('global');

NavbarChannel = Backbone.Radio.channel('navbar');

MessageChannel = Backbone.Radio.channel('messages');

NavbarApp = class NavbarApp extends App {
  initialize(options) {
    var appConfig, layout;
    appConfig = this.getOption('appConfig');
    layout = new BootstrapNavBarView({
      model: new Backbone.Model(appConfig)
    });
    this.showView(layout);
    if (__DEV__) {
      return this._nbview = layout;
    }
  }

  onStart() {
    var cfg;
    // FIXME: @getView() returns root layout view
    cfg = MainChannel.request('main:app:config');
    NavbarChannel.request('clear-entries', 'site');
    return NavbarChannel.request('add-entries', cfg.navbarEntries, 'site');
  }

};

export default NavbarApp;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGtuYXZiYXIvaW5kZXguanMiLCJzb3VyY2VzIjpbInRrbmF2YmFyL2luZGV4LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLFdBQUEsRUFBQSxjQUFBLEVBQUEsU0FBQSxFQUFBOztBQUFBLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQU8sUUFBUCxNQUFBOztBQUNBLE9BQUE7RUFBUyxHQUFUO0NBQUEsTUFBQTs7QUFDQSxPQUFPLEVBQVAsTUFBQTs7QUFFQSxPQUFBOztBQUNBLE9BQU8sZ0JBQVAsTUFBQTs7QUFDQSxPQUFPLGlCQUFQLE1BQUE7O0FBQ0EsT0FBTyxtQkFBUCxNQUFBOztBQUVBLElBQUcsaUJBQUg7RUFDRSxPQUFBLENBQVEsMEJBQVIsRUFERjs7O0FBR0EsV0FBQSxHQUFjLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixRQUF2Qjs7QUFDZCxhQUFBLEdBQWdCLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixRQUF2Qjs7QUFDaEIsY0FBQSxHQUFpQixRQUFRLENBQUMsS0FBSyxDQUFDLE9BQWYsQ0FBdUIsVUFBdkI7O0FBRVgsWUFBTixNQUFBLFVBQUEsUUFBd0IsSUFBeEI7RUFDRSxVQUFZLENBQUMsT0FBRCxDQUFBO0FBQ1YsUUFBQSxTQUFBLEVBQUE7SUFBQSxTQUFBLEdBQVksSUFBQyxDQUFBLFNBQUQsQ0FBVyxXQUFYO0lBQ1osTUFBQSxHQUFTLElBQUksbUJBQUosQ0FDUDtNQUFBLEtBQUEsRUFBTyxJQUFJLFFBQVEsQ0FBQyxLQUFiLENBQW1CLFNBQW5CO0lBQVAsQ0FETztJQUVULElBQUMsQ0FBQSxRQUFELENBQVUsTUFBVjtJQUNBLElBQUcsT0FBSDthQUNFLElBQUMsQ0FBQSxPQUFELEdBQVcsT0FEYjs7RUFMVTs7RUFRWixPQUFTLENBQUEsQ0FBQTtBQUVQLFFBQUEsR0FBQTs7SUFBQSxHQUFBLEdBQU0sV0FBVyxDQUFDLE9BQVosQ0FBb0IsaUJBQXBCO0lBQ04sYUFBYSxDQUFDLE9BQWQsQ0FBc0IsZUFBdEIsRUFBdUMsTUFBdkM7V0FDQSxhQUFhLENBQUMsT0FBZCxDQUFzQixhQUF0QixFQUFxQyxHQUFHLENBQUMsYUFBekMsRUFBd0QsTUFBeEQ7RUFKTzs7QUFUWDs7QUFlQSxPQUFBLFFBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJCBmcm9tICdqcXVlcnknXG5pbXBvcnQgQmFja2JvbmUgZnJvbSAnYmFja2JvbmUnXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdtYXJpb25ldHRlLnRvb2xraXQnXG5pbXBvcnQgdGMgZnJvbSAndGVhY3VwJ1xuXG5pbXBvcnQgJy4vZGJjaGFubmVsJ1xuaW1wb3J0IE5hdmJhckhlYWRlclZpZXcgZnJvbSAnLi9uYXZiYXItaGVhZGVyJ1xuaW1wb3J0IE5hdmJhckVudHJpZXNWaWV3IGZyb20gJy4vZW50cmllcydcbmltcG9ydCBCb290c3RyYXBOYXZCYXJWaWV3IGZyb20gJy4vbWFpbi12aWV3J1xuXG5pZiBfX3VzZUNzc01vZHVsZXNfX1xuICByZXF1aXJlIFwiLi4vLi4vc2Fzcy90a25hdmJhci5zY3NzXCJcblxuTWFpbkNoYW5uZWwgPSBCYWNrYm9uZS5SYWRpby5jaGFubmVsICdnbG9iYWwnXG5OYXZiYXJDaGFubmVsID0gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCAnbmF2YmFyJ1xuTWVzc2FnZUNoYW5uZWwgPSBCYWNrYm9uZS5SYWRpby5jaGFubmVsICdtZXNzYWdlcydcblxuY2xhc3MgTmF2YmFyQXBwIGV4dGVuZHMgQXBwXG4gIGluaXRpYWxpemU6IChvcHRpb25zKSAtPlxuICAgIGFwcENvbmZpZyA9IEBnZXRPcHRpb24gJ2FwcENvbmZpZydcbiAgICBsYXlvdXQgPSBuZXcgQm9vdHN0cmFwTmF2QmFyVmlld1xuICAgICAgbW9kZWw6IG5ldyBCYWNrYm9uZS5Nb2RlbCBhcHBDb25maWdcbiAgICBAc2hvd1ZpZXcgbGF5b3V0XG4gICAgaWYgX19ERVZfX1xuICAgICAgQF9uYnZpZXcgPSBsYXlvdXRcblxuICBvblN0YXJ0OiAtPlxuICAgICMgRklYTUU6IEBnZXRWaWV3KCkgcmV0dXJucyByb290IGxheW91dCB2aWV3XG4gICAgY2ZnID0gTWFpbkNoYW5uZWwucmVxdWVzdCAnbWFpbjphcHA6Y29uZmlnJ1xuICAgIE5hdmJhckNoYW5uZWwucmVxdWVzdCAnY2xlYXItZW50cmllcycsICdzaXRlJ1xuICAgIE5hdmJhckNoYW5uZWwucmVxdWVzdCAnYWRkLWVudHJpZXMnLCBjZmcubmF2YmFyRW50cmllcywgJ3NpdGUnXG4gICAgXG5leHBvcnQgZGVmYXVsdCBOYXZiYXJBcHBcblxuXG4iXX0=
