var MainChannel, NavbarApp, NavbarChannel;

import $ from 'jquery';

import {
  Model,
  Radio
} from 'backbone';

import {
  App
} from 'marionette.toolkit';

import './dbchannel';

import BootstrapNavBarView from './main-view';

if (__useCssModules__) {
  require("../../sass/tknavbar.scss");
}

MainChannel = Radio.channel('global');

NavbarChannel = Radio.channel('navbar');

NavbarApp = class NavbarApp extends App {
  initialize() {
    var appConfig, layout;
    appConfig = this.getOption('appConfig');
    layout = new BootstrapNavBarView({
      model: new Model(appConfig)
    });
    this.showView(layout);
    if (__DEV__) {
      return this._nbview = layout;
    }
  }

  onStart() {
    var cfg;
    // FIXME: @getView() returns root layout view
    cfg = MainChannel.request('main:app:config');
    NavbarChannel.request('clear-entries', 'site');
    return NavbarChannel.request('add-entries', cfg.navbarEntries, 'site');
  }

};

export default NavbarApp;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGtuYXZiYXIvaW5kZXguanMiLCJzb3VyY2VzIjpbInRrbmF2YmFyL2luZGV4LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLFdBQUEsRUFBQSxTQUFBLEVBQUE7O0FBQUEsT0FBTyxDQUFQLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLEtBQVQ7RUFBZ0IsS0FBaEI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUyxHQUFUO0NBQUEsTUFBQTs7QUFFQSxPQUFBOztBQUdBLE9BQU8sbUJBQVAsTUFBQTs7QUFFQSxJQUFHLGlCQUFIO0VBQ0UsT0FBQSxDQUFRLDBCQUFSLEVBREY7OztBQUdBLFdBQUEsR0FBYyxLQUFLLENBQUMsT0FBTixDQUFjLFFBQWQ7O0FBQ2QsYUFBQSxHQUFnQixLQUFLLENBQUMsT0FBTixDQUFjLFFBQWQ7O0FBRVYsWUFBTixNQUFBLFVBQUEsUUFBd0IsSUFBeEI7RUFDRSxVQUFZLENBQUEsQ0FBQTtBQUNkLFFBQUEsU0FBQSxFQUFBO0lBQUksU0FBQSxHQUFZLElBQUMsQ0FBQSxTQUFELENBQVcsV0FBWDtJQUNaLE1BQUEsR0FBUyxJQUFJLG1CQUFKLENBQ1A7TUFBQSxLQUFBLEVBQU8sSUFBSSxLQUFKLENBQVUsU0FBVjtJQUFQLENBRE87SUFFVCxJQUFDLENBQUEsUUFBRCxDQUFVLE1BQVY7SUFDQSxJQUFHLE9BQUg7YUFDRSxJQUFDLENBQUEsT0FBRCxHQUFXLE9BRGI7O0VBTFU7O0VBUVosT0FBUyxDQUFBLENBQUE7QUFDWCxRQUFBLEdBQUE7O0lBQ0ksR0FBQSxHQUFNLFdBQVcsQ0FBQyxPQUFaLENBQW9CLGlCQUFwQjtJQUNOLGFBQWEsQ0FBQyxPQUFkLENBQXNCLGVBQXRCLEVBQXVDLE1BQXZDO1dBQ0EsYUFBYSxDQUFDLE9BQWQsQ0FBc0IsYUFBdEIsRUFBcUMsR0FBRyxDQUFDLGFBQXpDLEVBQXdELE1BQXhEO0VBSk87O0FBVFg7O0FBZUEsT0FBQSxRQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5J1xuaW1wb3J0IHsgTW9kZWwsIFJhZGlvIH0gZnJvbSAnYmFja2JvbmUnXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdtYXJpb25ldHRlLnRvb2xraXQnXG5cbmltcG9ydCAnLi9kYmNoYW5uZWwnXG4jaW1wb3J0IE5hdmJhckhlYWRlclZpZXcgZnJvbSAnLi9uYXZiYXItaGVhZGVyJ1xuI2ltcG9ydCBOYXZiYXJFbnRyaWVzVmlldyBmcm9tICcuL2VudHJpZXMnXG5pbXBvcnQgQm9vdHN0cmFwTmF2QmFyVmlldyBmcm9tICcuL21haW4tdmlldydcblxuaWYgX191c2VDc3NNb2R1bGVzX19cbiAgcmVxdWlyZSBcIi4uLy4uL3Nhc3MvdGtuYXZiYXIuc2Nzc1wiXG5cbk1haW5DaGFubmVsID0gUmFkaW8uY2hhbm5lbCAnZ2xvYmFsJ1xuTmF2YmFyQ2hhbm5lbCA9IFJhZGlvLmNoYW5uZWwgJ25hdmJhcidcblxuY2xhc3MgTmF2YmFyQXBwIGV4dGVuZHMgQXBwXG4gIGluaXRpYWxpemU6IC0+XG4gICAgYXBwQ29uZmlnID0gQGdldE9wdGlvbiAnYXBwQ29uZmlnJ1xuICAgIGxheW91dCA9IG5ldyBCb290c3RyYXBOYXZCYXJWaWV3XG4gICAgICBtb2RlbDogbmV3IE1vZGVsIGFwcENvbmZpZ1xuICAgIEBzaG93VmlldyBsYXlvdXRcbiAgICBpZiBfX0RFVl9fXG4gICAgICBAX25idmlldyA9IGxheW91dFxuXG4gIG9uU3RhcnQ6IC0+XG4gICAgIyBGSVhNRTogQGdldFZpZXcoKSByZXR1cm5zIHJvb3QgbGF5b3V0IHZpZXdcbiAgICBjZmcgPSBNYWluQ2hhbm5lbC5yZXF1ZXN0ICdtYWluOmFwcDpjb25maWcnXG4gICAgTmF2YmFyQ2hhbm5lbC5yZXF1ZXN0ICdjbGVhci1lbnRyaWVzJywgJ3NpdGUnXG4gICAgTmF2YmFyQ2hhbm5lbC5yZXF1ZXN0ICdhZGQtZW50cmllcycsIGNmZy5uYXZiYXJFbnRyaWVzLCAnc2l0ZSdcbiAgICBcbmV4cG9ydCBkZWZhdWx0IE5hdmJhckFwcFxuXG5cbiJdfQ==
