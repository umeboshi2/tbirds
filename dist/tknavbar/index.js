var MainChannel, MessageChannel, NavbarApp, NavbarChannel;

import $ from 'jquery';

import Backbone from 'backbone';

import Toolkit from 'marionette.toolkit';

import tc from 'teacup';

import './dbchannel';

import NavbarHeaderView from './navbar-header';

import NavbarEntriesView from './entries';

import BootstrapNavBarView from './main-view';

if (__useCssModules__) {
  require("../../sass/tknavbar.scss");
}

MainChannel = Backbone.Radio.channel('global');

NavbarChannel = Backbone.Radio.channel('navbar');

MessageChannel = Backbone.Radio.channel('messages');

NavbarApp = class NavbarApp extends Toolkit.App {
  initialize(options) {
    var appConfig, layout;
    appConfig = this.getOption('appConfig');
    layout = new BootstrapNavBarView({
      model: new Backbone.Model(appConfig)
    });
    this.showView(layout);
    if (__DEV__) {
      return this._nbview = layout;
    }
  }

  onStart() {
    var cfg;
    // FIXME: @getView() returns root layout view
    cfg = MainChannel.request('main:app:config');
    NavbarChannel.request('clear-entries', 'site');
    return NavbarChannel.request('add-entries', cfg.navbarEntries, 'site');
  }

};

export default NavbarApp;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGtuYXZiYXIvaW5kZXguanMiLCJzb3VyY2VzIjpbInRrbmF2YmFyL2luZGV4LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLFdBQUEsRUFBQSxjQUFBLEVBQUEsU0FBQSxFQUFBOztBQUFBLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQU8sUUFBUCxNQUFBOztBQUNBLE9BQU8sT0FBUCxNQUFBOztBQUNBLE9BQU8sRUFBUCxNQUFBOztBQUVBLE9BQUE7O0FBQ0EsT0FBTyxnQkFBUCxNQUFBOztBQUNBLE9BQU8saUJBQVAsTUFBQTs7QUFDQSxPQUFPLG1CQUFQLE1BQUE7O0FBRUEsSUFBRyxpQkFBSDtFQUNFLE9BQUEsQ0FBUSwwQkFBUixFQURGOzs7QUFHQSxXQUFBLEdBQWMsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFFBQXZCOztBQUNkLGFBQUEsR0FBZ0IsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFmLENBQXVCLFFBQXZCOztBQUNoQixjQUFBLEdBQWlCLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBZixDQUF1QixVQUF2Qjs7QUFFWCxZQUFOLE1BQUEsVUFBQSxRQUF3QixPQUFPLENBQUMsSUFBaEM7RUFDRSxVQUFZLENBQUMsT0FBRCxDQUFBO0FBQ1YsUUFBQSxTQUFBLEVBQUE7SUFBQSxTQUFBLEdBQVksSUFBQyxDQUFBLFNBQUQsQ0FBVyxXQUFYO0lBQ1osTUFBQSxHQUFTLElBQUksbUJBQUosQ0FDUDtNQUFBLEtBQUEsRUFBTyxJQUFJLFFBQVEsQ0FBQyxLQUFiLENBQW1CLFNBQW5CO0lBQVAsQ0FETztJQUVULElBQUMsQ0FBQSxRQUFELENBQVUsTUFBVjtJQUNBLElBQUcsT0FBSDthQUNFLElBQUMsQ0FBQSxPQUFELEdBQVcsT0FEYjs7RUFMVTs7RUFRWixPQUFTLENBQUEsQ0FBQTtBQUVQLFFBQUEsR0FBQTs7SUFBQSxHQUFBLEdBQU0sV0FBVyxDQUFDLE9BQVosQ0FBb0IsaUJBQXBCO0lBQ04sYUFBYSxDQUFDLE9BQWQsQ0FBc0IsZUFBdEIsRUFBdUMsTUFBdkM7V0FDQSxhQUFhLENBQUMsT0FBZCxDQUFzQixhQUF0QixFQUFxQyxHQUFHLENBQUMsYUFBekMsRUFBd0QsTUFBeEQ7RUFKTzs7QUFUWDs7QUFlQSxPQUFBLFFBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJCBmcm9tICdqcXVlcnknXG5pbXBvcnQgQmFja2JvbmUgZnJvbSAnYmFja2JvbmUnXG5pbXBvcnQgVG9vbGtpdCBmcm9tICdtYXJpb25ldHRlLnRvb2xraXQnXG5pbXBvcnQgdGMgZnJvbSAndGVhY3VwJ1xuXG5pbXBvcnQgJy4vZGJjaGFubmVsJ1xuaW1wb3J0IE5hdmJhckhlYWRlclZpZXcgZnJvbSAnLi9uYXZiYXItaGVhZGVyJ1xuaW1wb3J0IE5hdmJhckVudHJpZXNWaWV3IGZyb20gJy4vZW50cmllcydcbmltcG9ydCBCb290c3RyYXBOYXZCYXJWaWV3IGZyb20gJy4vbWFpbi12aWV3J1xuXG5pZiBfX3VzZUNzc01vZHVsZXNfX1xuICByZXF1aXJlIFwiLi4vLi4vc2Fzcy90a25hdmJhci5zY3NzXCJcblxuTWFpbkNoYW5uZWwgPSBCYWNrYm9uZS5SYWRpby5jaGFubmVsICdnbG9iYWwnXG5OYXZiYXJDaGFubmVsID0gQmFja2JvbmUuUmFkaW8uY2hhbm5lbCAnbmF2YmFyJ1xuTWVzc2FnZUNoYW5uZWwgPSBCYWNrYm9uZS5SYWRpby5jaGFubmVsICdtZXNzYWdlcydcblxuY2xhc3MgTmF2YmFyQXBwIGV4dGVuZHMgVG9vbGtpdC5BcHBcbiAgaW5pdGlhbGl6ZTogKG9wdGlvbnMpIC0+XG4gICAgYXBwQ29uZmlnID0gQGdldE9wdGlvbiAnYXBwQ29uZmlnJ1xuICAgIGxheW91dCA9IG5ldyBCb290c3RyYXBOYXZCYXJWaWV3XG4gICAgICBtb2RlbDogbmV3IEJhY2tib25lLk1vZGVsIGFwcENvbmZpZ1xuICAgIEBzaG93VmlldyBsYXlvdXRcbiAgICBpZiBfX0RFVl9fXG4gICAgICBAX25idmlldyA9IGxheW91dFxuXG4gIG9uU3RhcnQ6IC0+XG4gICAgIyBGSVhNRTogQGdldFZpZXcoKSByZXR1cm5zIHJvb3QgbGF5b3V0IHZpZXdcbiAgICBjZmcgPSBNYWluQ2hhbm5lbC5yZXF1ZXN0ICdtYWluOmFwcDpjb25maWcnXG4gICAgTmF2YmFyQ2hhbm5lbC5yZXF1ZXN0ICdjbGVhci1lbnRyaWVzJywgJ3NpdGUnXG4gICAgTmF2YmFyQ2hhbm5lbC5yZXF1ZXN0ICdhZGQtZW50cmllcycsIGNmZy5uYXZiYXJFbnRyaWVzLCAnc2l0ZSdcbiAgICBcbmV4cG9ydCBkZWZhdWx0IE5hdmJhckFwcFxuXG5cbiJdfQ==
